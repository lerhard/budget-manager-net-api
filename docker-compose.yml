services:
  budgetmanagerdb:
    image: budget-manager-postgres-database:latest
    environment:
        POSTGRES_USER: postgres
        POSTGRES_PASSWORD: postgres
    ports:
      - "5432:5432"
    
  budgetmanagerapi:
    image: budgetmanagerapi
    build:
      context: .
      dockerfile: BudgetManagerApi/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Docker
      ASPNETCORE_URLS: "http://+:8080;https://+:8081"
      Kestrel__Certificates__Default__Path: /https/aspnetapp.pfx
    ports:
      - "8080:8080"
      - "8081:8081"
    depends_on: 
     - budgetmanagerdb
    volumes:
      - ${HOME}/.aspnet/https:/https:ro